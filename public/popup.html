<!DOCTYPE html>
<html lang="kr" class="sl-theme-dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="popup.css" />
  </head>

  <body>
    <div id="shild">보호화면입니다. 커서를 올리면 사라집니다.</div>

    <sl-dialog id="app-setting" label="앱 설정" class="dialog-overview">
      <sl-button id="listModify" size="small">
        콘목록 수정
        <sl-icon slot="suffix" name="box-arrow-up-right"></sl-icon>
      </sl-button>
      <sl-button id="emergency" size="small">전체 태그 내보내기</sl-button>

      <sl-divider></sl-divider>

      <div id="setting">
        <div>
          <h4>동기화</h4>
          <span>계정에 저장되어 다른 기기와 동기화됩니다.</span>
        </div>
        <sl-switch data-setting="syncSetting" name="syncSettingEnable"
          >설정 동기화</sl-switch
        ><br />
        <sl-switch data-setting="syncArcacons" name="syncsyncArcaconsEnable"
          >아카콘 목록 동기화</sl-switch
        >
        <br />
        <br />
        <sl-tooltip content="다른곳에서 데이터를 변경했을때 눌러주세요.">
          <sl-button id="syncToLocal" size="small">계정데이터 연동</sl-button>
        </sl-tooltip>
        <sl-divider></sl-divider>

        <h4>대기화면</h4>
        <sl-switch data-setting="isSleep" name="sleepEnable">활성</sl-switch>
        <br />
        <br />
        <sl-input
          data-setting="sleepTime"
          label="가리기 지연시간"
          type="number"
          size="small"
          value="-1"
          help-text="단위: 밀리초(ms)"
        ></sl-input>
        <br />
        <sl-range
          data-setting="sleepOpacity"
          label="투명도"
          min="0"
          max="1"
          step="0.01"
        ></sl-range>

        <sl-divider></sl-divider>

        <!-- 아카콘 크기 설정 -->
        <h4>아카콘 크기</h4>
        <sl-input
          data-setting="conSize"
          type="number"
          size="small"
          value="10"
          help-text="단위: 픽셀(px)"
        ></sl-input>
      </div>

      <sl-divider></sl-divider>

      <!-- 프로그램 정보 -->
      <h4>프로그램 정보</h4>
      <pre>
버전: <span id="version">Error</span>
릴리즈: <span id="releaseLink">열기</span>

개발자: dbckd999

GitHub 링크: <a class="newtab" href="https://github.com/dbckd999/arcacon_selector"><sl-icon name="github"></sl-icon></a>
버그 제보: <a class="newtab" href="https://github.com/dbckd999/arcacon_selector/issues">이슈 링크</a>
라이선스: <a class="newtab" href="./license.html">LISENCE</a>
</pre>

      <!-- <sl-tab slot="nav" panel="setting">설정</sl-tab> -->
      <!-- <sl-tab slot="nav" panel="account">계정</sl-tab> -->
      <!-- <sl-tab-panel name="account"> -->
      <!-- 인증/인가기능 -->
      <!-- <sl-button id="authsl-button">구글로 시작</sl-button> -->
      <!-- <sl-button id="getAccess">엑세스토큰 재발급</sl-button> -->
      <!-- <sl-button id="secureBtn">태그데이터 요청</sl-button> -->
      <!-- <sl-button id="new_test">토큰 테스트</sl-button> -->
      <!-- </sl-tab-panel> -->
    </sl-dialog>

    <!-- 릴리즈노트 -->
    <sl-dialog id="release" label="릴리즈노트" class="dialog-overview">
      <sl-include src="./chagelog.html"></sl-include>
    </sl-dialog>

    <sl-dialog id="data-manamge" label="데이터 관리" class="dialog-overview">
      <sl-tab-group>
        <sl-tab slot="nav" panel="is-show">숨기기/보이기</sl-tab>
        <sl-tab slot="nav" panel="delete-data">데이터 삭제</sl-tab>
        <sl-tab slot="nav" panel="export">내보내기</sl-tab>
        <sl-tab slot="nav" panel="import">가져오기</sl-tab>

        <sl-tab-panel name="is-show">
          <form id="is-show">
            <sl-checkbox name="syncSearch">검색결과와 연동</sl-checkbox>
            <ul id="showData" class="glue"></ul>
            <sl-button type="submit" variant="primary" size="small"
              >저장</sl-button
            >
          </form>
        </sl-tab-panel>

        <sl-tab-panel name="delete-data">
          <form id="delete-form">
            <ul id="delete-data" class="glue"></ul>
            <sl-button type="submit" variant="danger" size="small"
              >삭제</sl-button
            >
          </form>
          <sl-button size="small">사용 불가능한 항목 선택</sl-button>
        </sl-tab-panel>

        <sl-tab-panel name="export">
          <h3>내보낼 태그의 아카콘을 선택하세요</h3>
          <form id="downloadForm">
            <ul id="downloadBox" class="glue"></ul>
            <br />
            <sl-button
              type="reset"
              slot="footer"
              variant="default"
              id="downloadBoxInit"
              >초기화</sl-button
            >
            <sl-button type="submit" slot="footer" variant="primary"
              >내보내기</sl-button
            >
          </form>
        </sl-tab-panel>

        <sl-tab-panel name="import">
          <h3>가져올 태그파일을 입력해 주세요</h3>
          <div id="uppy-dashboard"></div>
        </sl-tab-panel>
      </sl-tab-group>
    </sl-dialog>

    <sl-drawer placement="bottom" class="drawer" no-header>
      <span>
        <h3 style="margin-top: 1em">📘 검색 규칙</h3>
        <span
          id="doc"
          data-href="https://www.fusejs.io/examples.html#default-weight"
          >공식문서</span
        >
        <sl-copy-button from="doc[data-href]"></sl-copy-button>
      </span>
      <p>
        공백(<strong>" "</strong>)은 <strong>AND</strong>, 세로줄(
        <strong>|</strong> )은 <strong>OR</strong> 검색을 의미합니다.
      </p>
      <table style="width: 100%; border-collapse: collapse; margin-top: 1em">
        <thead>
          <tr style="background: var(--sl-color-neutral-100)">
            <th style="padding: 8px; text-align: left">입력 형태</th>
            <th style="padding: 8px; text-align: left">의미</th>
            <th style="padding: 8px; text-align: left">설명</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 8px"><strong>단어</strong></td>
            <td style="padding: 8px">오타 허용 일치</td>
            <td style="padding: 8px">비슷한 단어까지 허용하여 검색</td>
          </tr>
          <tr>
            <td style="padding: 8px"><strong>=단어</strong></td>
            <td style="padding: 8px">완전 일치</td>
            <td style="padding: 8px">단어 전체가 정확히 동일할 때만</td>
          </tr>
          <tr>
            <td style="padding: 8px"><strong>'단어</strong></td>
            <td style="padding: 8px">포함 일치</td>
            <td style="padding: 8px">해당 단어가 포함된 항목</td>
          </tr>
          <tr>
            <td style="padding: 8px"><strong>!단어</strong></td>
            <td style="padding: 8px">포함되지 않음</td>
            <td style="padding: 8px">해당 단어를 포함하지 않은 항목</td>
          </tr>
          <tr>
            <td style="padding: 8px"><strong>^단어</strong></td>
            <td style="padding: 8px">접두어 일치</td>
            <td style="padding: 8px">단어로 시작하는 항목</td>
          </tr>
          <tr>
            <td style="padding: 8px"><strong>!^단어</strong></td>
            <td style="padding: 8px">접두어 불일치</td>
            <td style="padding: 8px">단어로 시작하지 않는 항목</td>
          </tr>
          <tr>
            <td style="padding: 8px"><strong>단어$</strong></td>
            <td style="padding: 8px">접미어 일치</td>
            <td style="padding: 8px">단어로 끝나는 항목</td>
          </tr>
          <tr>
            <td style="padding: 8px"><strong>!단어$</strong></td>
            <td style="padding: 8px">접미어 불일치</td>
            <td style="padding: 8px">단어로 끝나지 않는 항목</td>
          </tr>
        </tbody>
      </table>
      <sl-divider></sl-divider>
      <p>
        등록된 각 아카콘 태그들은 내부에서 초성으로 분리되어 저장됩니다. 판매
        페이지의 아카콘 대표 태그는 초성으로 변환되지 않습니다.
      </p>
      <p>
        각 이모티콘에는 <code>"검색어1 검색어2"</code> 형태로 태그가 한 문장으로
        합쳐져 있습니다.<br />
        이런 데이터 구성은 <strong>AND(중첩) 검색</strong>에 유리합니다.
      </p>
      <p>
        기본 검색은 <code>검색어(검색어1, 검색어2)</code>가 다음 형태로
        변환됩니다.<br />
        예: <code>'검색어1 '검색어2</code><br />
        이 검색어는 <strong>포함 일치검색 + AND 연산</strong>으로 모두 충족하는
        결과를 반환합니다.
      </p>
    </sl-drawer>

    <!-- popup.js에서 아카콘 스타일 정의 -->
    <style id="conStyle"></style>
    <!-- 스크롤가능한 래퍼 -->
    <div class="main">
      <nav>
        <form action="#" id="tagInput">
          <sl-input
            name="tag"
            class="label-on-left"
            size="small"
            placeholder="엔터로 입력, 스페이스바로 여러개 입력가능"
            clearable
            required
            pattern=".*\S.*"
            data-error-message="태그는 공백일 수 없습니다."
            filled
          >
            <sl-icon name="search" slot="prefix"></sl-icon>
            <sl-button type="submit" slot="suffix" style="margin: 0"
              >추가</sl-button
            >
            <sl-button
              type="button"
              id="advSearch"
              slot="suffix"
              style="margin: 0"
              >고급</sl-button
            >
          </sl-input>
        </form>
        <form id="acvenceTag" style="display: none">
          <sl-input
            name="tag"
            class="label-on-left"
            size="small"
            placeholder="여러 태그를 한번에 입력"
            clearable
            required
            filled
          >
            <sl-icon name="search" slot="prefix"></sl-icon>
            <sl-button
              id="searchHelp"
              type="button"
              slot="suffix"
              style="margin: 0"
              >도움말</sl-button
            >
            <sl-button
              type="button"
              id="nomalSearch"
              slot="suffix"
              style="margin: 0"
              >일반</sl-button
            >
          </sl-input>
        </form>

        <div class="tags-removable">
          <span id="removeAllTag"
            >전부 지우기<sl-icon name="x-octagon"></sl-icon
          ></span>
        </div>

        <sl-divider></sl-divider>

        <div id="combo-container">
          <div id="comboConWrap">
            <!-- 사용할 콤보콘은 여기에 -->
          </div>
          <sl-switch id="comboCon" size="small">콤보콘</sl-switch>
          <sl-button id="recordCombocon" disabled size="small">작성</sl-button>
        </div>

        <sl-divider></sl-divider>

        <!-- 콘 대표 목록. 누르면 해당 콘으로 이동 -->
        <div id="conHeaders" class="images-container">
          <a href="#searchSpan">
            <sl-avatar>
              <sl-icon slot="icon" name="search"></sl-icon>
            </sl-avatar>
          </a>
        </div>
      </nav>
      <!-- 검색결과 -->
      <div class="scrollable" style="overflow: scroll">
        <div id="searchResult">
          <span id="searchSpan">검색결과</span>
          <br />
          <div class="images-container"></div>
        </div>

        <sl-divider></sl-divider>

        <!-- 다운받은 아카콘들 -->
        <div id="conWrap"></div>
      </div>
    </div>

    <!-- 서버 토큰발급 -->
    <!-- <script src="js/auth.js"></script> -->
    <!-- 검색할때 -->
    <!-- <script src="js/search.js"></script> -->
    <script src="popup.js"></script>
  </body>
</html>
